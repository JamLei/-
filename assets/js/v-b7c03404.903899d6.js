"use strict";(self.webpackChunkjava_note_vuepress2=self.webpackChunkjava_note_vuepress2||[]).push([[6935],{77143:(n,a,s)=>{s.r(a),s.d(a,{data:()=>t});const t={key:"v-b7c03404",path:"/maven/105-%E5%85%B6%E5%AE%83%E6%8F%92%E4%BB%B6.html",title:"Maven 的其它插件",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"tomcat8 插件",slug:"tomcat8-插件",children:[]},{level:2,title:"mybatis-generator 插件",slug:"mybatis-generator-插件",children:[]},{level:2,title:"dockerfile 插件",slug:"dockerfile-插件",children:[]}],filePathRelative:"maven/105-其它插件.md",git:{updatedTime:1629711344e3,contributors:[{name:"hemiao",email:"hemiao3000@126.com",commits:1}]}}},75905:(n,a,s)=>{s.r(a),s.d(a,{default:()=>f});var t=s(66252);const p=(0,t._)("h1",{id:"maven-的其它插件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#maven-的其它插件","aria-hidden":"true"},"#"),(0,t.Uk)(" Maven 的其它插件")],-1),e=(0,t._)("h2",{id:"tomcat8-插件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#tomcat8-插件","aria-hidden":"true"},"#"),(0,t.Uk)(" tomcat8 插件")],-1),l=(0,t._)("blockquote",null,[(0,t._)("p",null,"可能因为某些特殊原因，你需要要使用 tomcat8-maven-plugin 。")],-1),c=(0,t.Uk)("你能在 mvnrepository 上查到 "),o=(0,t._)("strong",null,"tomcat8-maven-plugin",-1),u=(0,t.Uk)(" 插件的信息"),i=(0,t.Uk)("（"),r={href:"https://mvnrepository.com/artifact/org.apache.tomcat.maven/tomcat8-maven-plugin",target:"_blank",rel:"noopener noreferrer"},g=(0,t.Uk)("网址"),k=(0,t.Uk)("）"),m=(0,t.Uk)("。但是，人家有也明确说了，这个包并不在中央仓库中，而是在另一个"),b=(0,t._)("small",null,"（非中央）",-1),d=(0,t.Uk)("仓库里。"),v=(0,t.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Note: this artifact is located at ICM repository (http://maven.icm.edu.pl/artifactory/repo/)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>因此，maven 无法从中央仓库下载到 tomcat 8 的 maven 插件，因为中央仓库根本就没有。<small>阿里的镜像服务器中自然也没有。</small></p><p>如果，你要使用 <strong>tomcat8-maven-plugin</strong> 插件，你需要额外地、明确地告诉它对于中央仓库中没有的包，要去哪里下载。这就需要在 pom.xml 配置文件中进行配置。</p><p>依赖声明整体结构<small>（其它无关元素略。另外，<em>pluginRepositories</em> 习惯性在 <em>build</em> 的后面）</small>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>project \n├── dependencies\n├── build\n└── pluginRepositories\n    ├── pluginRepository\n    ├── pluginRepository\n    ├── ...\n    └── pluginRepository\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>主要包含如下元素：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepositories</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepository</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>alfresco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://artifacts.alfresco.com/nexus/content/repositories/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>\n           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepository</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepositories</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>考虑到境外仓库的网络问题，最好还是直接从老师<small>（或同事）</small>的本地仓库中将他们下好的 tomcat8 插件拷贝过来<small>（更省事一些）</small>。</strong></p><hr><p>在通过 tomcat8-maven-plugin 运行项目时，可能会遇到一些问题：</p><ul><li><p>问题一：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Caused by: java.io.FileNotFoundException: C:\\Program%20Files\\JetBrains\\IntelliJ%20IDEA%202020.2.3\\plugins\\maven\\lib\\maven3\\lib\\javax.inject-1.jar (系统找不到指定的路径。)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这是因为 IDEA 所使用的内置的 maven 的路径名中有空格（上述的 <code>%20</code>）对 tomcat8-maven-plugin 造成了干扰<small>（对 tomcat7-maven-plugin 没影响）</small>。</p><p>因此，你需要将 IDEA 所使用的 maven 从内置的 maven 配置为外部的 maven，而且这个 maven 的路径中不能有空格。</p></li><li><p>问题二：</p><p>通过 tomcat8-maven-plugin 运行项目时，使用的是 <strong>tomcat8:run-war</strong> 命令。否则，有可能会出现莫名其妙的 500 错误。</p></li></ul><h2 id="mybatis-generator-插件" tabindex="-1"><a class="header-anchor" href="#mybatis-generator-插件" aria-hidden="true">#</a> mybatis-generator 插件</h2><blockquote><p>就我个人而言，如果项目中使用到了 mybatis 框架，那么 mybatis-generator 插件就是我的必备插件。</p></blockquote><p><strong>mybatis-generator-maven-plugin</strong> 是 mybatis 官方提供的用于在 maven 中直接使用 mybatis-generator 。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>\n\n    ...\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- mybatis.generator 插件 begin --&gt;</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-generator-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 不要低于 1.3.7 版本 --&gt;</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-generator-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 不要低于 1.3.7 版本 --&gt;</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>verbose</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>verbose</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 允许移动生成的文件 --&gt;</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>overwrite</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>overwrite</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 是否覆盖 --&gt;</span>\n            <span class="token comment">&lt;!-- 自动生成的配置 --&gt;</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configurationFile</span><span class="token punctuation">&gt;</span></span>\n                src/main/resources/mybatis/mybatis-generator-config.xml\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configurationFile</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- mybatis.generator 插件 end --&gt;</span>\n\n    ...\n    \n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>上述的配置中的要素的作用显而易见：</p><ul><li>插件依赖于数据库驱动包和 mybatis-generator-core 来连接到数据库，并进行反向生成功能。</li><li>插件需要你提供一个配置文件来告诉它反向生成过程中的一些具体细节。</li></ul><h2 id="dockerfile-插件" tabindex="-1"><a class="header-anchor" href="#dockerfile-插件" aria-hidden="true">#</a> dockerfile 插件</h2><p><strong>dockerfile-maven-plugin</strong> 是 spotify 公司新提供的、用以替代 docker-maven-plugin 的插件，它同样是用于在 maven 中将当前项目打成一个 docker image 。 相较于 docker-maven-plugin 而言，<strong>dockerfile-maven-plugin</strong> 更简洁、方便。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.spotify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dockerfile-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>${project.artifactId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>buildArgs</span><span class="token punctuation">&gt;</span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>JAR_FILE</span><span class="token punctuation">&gt;</span></span>${project.build.finalName}.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>JAR_FILE</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>buildArgs</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>dockerfile-maven-plugin 插件会要求在项目的根目录下，也就是 pom.xml 文件的平级目录下存在一个 Dockerfile 文件，它会去用这个 Dockerfile 文件生成 docker image 。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM openjdk:8-jre-alpine\nEXPOSE 8080\nARG JAR_FILE\nADD target/${JAR_FILE} app.jar\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',22),f={render:function(n,a){const s=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[p,e,l,(0,t._)("p",null,[c,o,u,(0,t._)("small",null,[i,(0,t._)("a",r,[g,(0,t.Wm)(s)]),k]),m,b,d]),v],64)}}}}]);