"use strict";(self.webpackChunkjava_note_vuepress2=self.webpackChunkjava_note_vuepress2||[]).push([[4428],{5425:(s,n,a)=>{a.r(n),a.d(n,{data:()=>t});const t={key:"v-3e4565c6",path:"/es/00-%E7%B4%A0%E6%9D%90.html",title:"素材",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"1. 删除已有索引",slug:"_1-删除已有索引",children:[]},{level:2,title:"2. 创建索引",slug:"_2-创建索引",children:[{level:3,title:"2.1 ES 7.10.2 版本",slug:"_2-1-es-7-10-2-版本",children:[]},{level:3,title:"2.2 es 7.11.1 版本",slug:"_2-2-es-7-11-1-版本",children:[]}]},{level:2,title:"3. 批量插入数据",slug:"_3-批量插入数据",children:[]},{level:2,title:"4.  验证",slug:"_4-验证",children:[]}],filePathRelative:"es/00-素材.md",git:{updatedTime:1629826614e3,contributors:[{name:"hemiao",email:"hemiao3000@126.com",commits:1}]}}},44376:(s,n,a)=>{a.r(n),a.d(n,{default:()=>p});const t=(0,a(66252).uE)('<h1 id="素材" tabindex="-1"><a class="header-anchor" href="#素材" aria-hidden="true">#</a> 素材</h1><p>注意，从 7.11 开始 ES 就不再支持 Windows 7 了，因此 7.10.2 是支持 Windows 7 的最后一个版本。</p><p>下述内容中共有 4 条命令。请依次执行。</p><h2 id="_1-删除已有索引" tabindex="-1"><a class="header-anchor" href="#_1-删除已有索引" aria-hidden="true">#</a> 1. 删除已有索引</h2><pre><code>```\nDELETE books\n```\n</code></pre><h2 id="_2-创建索引" tabindex="-1"><a class="header-anchor" href="#_2-创建索引" aria-hidden="true">#</a> 2. 创建索引</h2><p>ES 7.10.2 和 ES 7.11.1 版本创建索引语法不同，此处需要注意。</p><h3 id="_2-1-es-7-10-2-版本" tabindex="-1"><a class="header-anchor" href="#_2-1-es-7-10-2-版本" aria-hidden="true">#</a> 2.1 ES 7.10.2 版本</h3><p>ES 7.10.2 要求在建 index 的时候就指定 index 的 mapping ：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">PUT</span> books\n<span class="token punctuation">{</span>\n  <span class="token string">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">&quot;id&quot;</span>       <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;title&quot;</span>    <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>   <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_smart&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;author&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;price&quot;</span>    <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;float&quot;</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;description&quot;</span>  <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span> <span class="token punctuation">}</span> \n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-2-es-7-11-1-版本" tabindex="-1"><a class="header-anchor" href="#_2-2-es-7-11-1-版本" aria-hidden="true">#</a> 2.2 es 7.11.1 版本</h3><p>ES 7.11.1 可以在创建完 index 之后，再来设置 index 的 mapping ：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">PUT</span> books\n<span class="token constant">PUT</span> <span class="token operator">/</span>books<span class="token operator">/</span>_mapping\n<span class="token punctuation">{</span>\n  <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;id&quot;</span>       <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;title&quot;</span>    <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>   <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_smart&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;author&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;price&quot;</span>    <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;float&quot;</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;description&quot;</span>  <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ik_max_word&quot;</span> <span class="token punctuation">}</span> \n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-批量插入数据" tabindex="-1"><a class="header-anchor" href="#_3-批量插入数据" aria-hidden="true">#</a> 3. 批量插入数据</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">POST</span> _bulk\n  <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Java 编程思想&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;author&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Bruce Eckel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">70.20</span><span class="token punctuation">,</span> <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2007-10-01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Java 学习必读经典，殿堂级著作！赢得了全球程序员的广泛赞誉。&quot;</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Java 程序性能优化&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;author&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;葛一鸣&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">46.50</span><span class="token punctuation">,</span> <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-08-01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;让你的 Java 程序更快、更稳定。深入剖析软件设计层面、代码层面、JVM 虚拟机层面的优化方法。&quot;</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Python 科学计算&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;python&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;author&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;张若愚&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">81.40</span><span class="token punctuation">,</span> <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2016-05-01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;零基础学 Python，光盘中作者独家整合开发 winPython 运行环境，涵盖了 Python 各个扩展库。&quot;</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Python 基础教程&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;python&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;author&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Helant&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">54.50</span><span class="token punctuation">,</span> <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2014-03-01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;经典的 Python 入门教程，层次鲜明，结构严谨，内容详实。&quot;</span> <span class="token punctuation">}</span> \n  <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;JavaScript 高级程序设计&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;author&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Nicholas C.Zakas&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">66.40</span><span class="token punctuation">,</span> <span class="token string">&quot;publish_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2013-10-01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;JavaScript 技术经典名著&quot;</span> <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_4-验证" tabindex="-1"><a class="header-anchor" href="#_4-验证" aria-hidden="true">#</a> 4. 验证</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">GET</span> <span class="token operator">/</span>books<span class="token operator">/</span>_doc<span class="token operator">/</span>_search\n\n<span class="token constant">GET</span> <span class="token operator">/</span>books<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span>_termvectors<span class="token operator">?</span>fields<span class="token operator">=</span>description\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',17),p={render:function(s,n){return t}}}}]);