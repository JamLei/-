<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.24">
    <title>多线程：基础 | hemiao3000</title><meta name="description" content="Java Note All in One">
    <link rel="preload" href="/assets/js/runtime~app.98b3ec54.js" as="script"><link rel="preload" href="/assets/css/styles.a89f47c6.css" as="style"><link rel="preload" href="/assets/js/1812.d943ba23.js" as="script"><link rel="preload" href="/assets/js/app.305f9df9.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.a89f47c6.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">hemiao3000</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="环境软件和模板"><span class="title">环境软件和模板</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="环境软件和模板"><span class="title">环境软件和模板</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/windows/01-IDEA.md" class="nav-link" aria-label="Windows"><!--[--><!--]--> Windows <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/linux/00-预备知识.md" class="nav-link" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/git/000-安装与配置.md" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/docker/01-简介和安装.md" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/docker-install/01-mysql.md" class="nav-link" aria-label="Docker 安装软件"><!--[--><!--]--> Docker 安装软件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/gist/01-jdbc-logback.md" class="nav-link" aria-label="各种模板"><!--[--><!--]--> 各种模板 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第一阶段"><span class="title">第一阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第一阶段"><span class="title">第一阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/java/00-环境变量.md" class="nav-link" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/mysql/01-操作Database.md" class="nav-link" aria-label="MySQL 数据库"><!--[--><!--]--> MySQL 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jdbc/01-JDBC基础.md" class="nav-link" aria-label="JDBC 操作数据库"><!--[--><!--]--> JDBC 操作数据库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>进阶</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/java-thread/thread-01-base.md" class="nav-link" aria-label="Java 多线程"><!--[--><!--]--> Java 多线程 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/java8/02-lambda.md" class="nav-link" aria-label="JDK8 新特性"><!--[--><!--]--> JDK8 新特性 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/guava/01-字符串工具类.md" class="nav-link" aria-label="Guava 工具库"><!--[--><!--]--> Guava 工具库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/spring-utils/01-top4.md" class="nav-link" aria-label="Spring 内置工具库"><!--[--><!--]--> Spring 内置工具库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/3rd/01-slf4j.md" class="nav-link" aria-label="其它工具库"><!--[--><!--]--> 其它工具库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>扩展</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jvm/01-JVM内存布局.md" class="nav-link" aria-label="Java 虚拟机"><!--[--><!--]--> Java 虚拟机 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第二阶段"><span class="title">第二阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第二阶段"><span class="title">第二阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/html/01-基本概念和结构.md" class="nav-link" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/css/01-基本概念.md" class="nav-link" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/js/JS-01-基础.md" class="nav-link" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/servlet/Servlet-00-HTTP概述.md" class="nav-link" aria-label="Servlet"><!--[--><!--]--> Servlet <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/junit/JUnit-01-基础.md" class="nav-link" aria-label="JUnit"><!--[--><!--]--> JUnit <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/mybatis/01-mybatis-basics.md" class="nav-link" aria-label="Mybatis"><!--[--><!--]--> Mybatis <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端进阶</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/ajax/01-基础.md" class="nav-link" aria-label="AJAX 请求及相关"><!--[--><!--]--> AJAX 请求及相关 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/vue/vue-00-devtool.md" class="nav-link" aria-label="Vue（上）"><!--[--><!--]--> Vue（上） <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第三阶段"><span class="title">第三阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第三阶段"><span class="title">第三阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>SSM</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/maven/001-基本概念.md" class="nav-link" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring/01-IoC.md" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring-mvc/001-helloworld.md" class="nav-link" aria-label="Spring MVC"><!--[--><!--]--> Spring MVC <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring-boot/02-Java代码配置.md" class="nav-link" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端高级</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/restful/01-基础.md" class="nav-link" aria-label="RESTful API"><!--[--><!--]--> RESTful API <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/vue-cli/vue-cli-01.md" class="nav-link" aria-label="Vue（下）"><!--[--><!--]--> Vue（下） <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/nginx/01-前后端分离.md" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>权限和其它</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/shiro/01-Shiro-基础.md" class="nav-link" aria-label="Shiro"><!--[--><!--]--> Shiro <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/redis/01-简介.md" class="nav-link" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第四阶段"><span class="title">第四阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第四阶段"><span class="title">第四阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/spring-cloud/01-spring-cloud.md" class="nav-link" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/rabbitmq/01-简介.md" class="nav-link" aria-label="RabbitMQ"><!--[--><!--]--> RabbitMQ <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/es/00-素材.md" class="nav-link" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/other/01-SnowFlake.md" class="nav-link" aria-label="其它"><!--[--><!--]--> 其它 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="环境软件和模板"><span class="title">环境软件和模板</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="环境软件和模板"><span class="title">环境软件和模板</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/windows/01-IDEA.md" class="nav-link" aria-label="Windows"><!--[--><!--]--> Windows <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/linux/00-预备知识.md" class="nav-link" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/git/000-安装与配置.md" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/docker/01-简介和安装.md" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/docker-install/01-mysql.md" class="nav-link" aria-label="Docker 安装软件"><!--[--><!--]--> Docker 安装软件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/gist/01-jdbc-logback.md" class="nav-link" aria-label="各种模板"><!--[--><!--]--> 各种模板 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第一阶段"><span class="title">第一阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第一阶段"><span class="title">第一阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/java/00-环境变量.md" class="nav-link" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/mysql/01-操作Database.md" class="nav-link" aria-label="MySQL 数据库"><!--[--><!--]--> MySQL 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/jdbc/01-JDBC基础.md" class="nav-link" aria-label="JDBC 操作数据库"><!--[--><!--]--> JDBC 操作数据库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>进阶</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/java-thread/thread-01-base.md" class="nav-link" aria-label="Java 多线程"><!--[--><!--]--> Java 多线程 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/java8/02-lambda.md" class="nav-link" aria-label="JDK8 新特性"><!--[--><!--]--> JDK8 新特性 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/guava/01-字符串工具类.md" class="nav-link" aria-label="Guava 工具库"><!--[--><!--]--> Guava 工具库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/spring-utils/01-top4.md" class="nav-link" aria-label="Spring 内置工具库"><!--[--><!--]--> Spring 内置工具库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/utility/3rd/01-slf4j.md" class="nav-link" aria-label="其它工具库"><!--[--><!--]--> 其它工具库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>扩展</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/jvm/01-JVM内存布局.md" class="nav-link" aria-label="Java 虚拟机"><!--[--><!--]--> Java 虚拟机 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第二阶段"><span class="title">第二阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第二阶段"><span class="title">第二阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/html/01-基本概念和结构.md" class="nav-link" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/css/01-基本概念.md" class="nav-link" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/js/JS-01-基础.md" class="nav-link" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><a href="/servlet/Servlet-00-HTTP概述.md" class="nav-link" aria-label="Servlet"><!--[--><!--]--> Servlet <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/junit/JUnit-01-基础.md" class="nav-link" aria-label="JUnit"><!--[--><!--]--> JUnit <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/mybatis/01-mybatis-basics.md" class="nav-link" aria-label="Mybatis"><!--[--><!--]--> Mybatis <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端进阶</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/ajax/01-基础.md" class="nav-link" aria-label="AJAX 请求及相关"><!--[--><!--]--> AJAX 请求及相关 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/vue/vue-00-devtool.md" class="nav-link" aria-label="Vue（上）"><!--[--><!--]--> Vue（上） <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第三阶段"><span class="title">第三阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第三阶段"><span class="title">第三阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>SSM</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/maven/001-基本概念.md" class="nav-link" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring/01-IoC.md" class="nav-link" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring-mvc/001-helloworld.md" class="nav-link" aria-label="Spring MVC"><!--[--><!--]--> Spring MVC <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/spring-boot/02-Java代码配置.md" class="nav-link" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>前端高级</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/restful/01-基础.md" class="nav-link" aria-label="RESTful API"><!--[--><!--]--> RESTful API <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/vue-cli/vue-cli-01.md" class="nav-link" aria-label="Vue（下）"><!--[--><!--]--> Vue（下） <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/nginx/01-前后端分离.md" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>权限和其它</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/shiro/01-Shiro-基础.md" class="nav-link" aria-label="Shiro"><!--[--><!--]--> Shiro <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/redis/01-简介.md" class="nav-link" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="第四阶段"><span class="title">第四阶段</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="第四阶段"><span class="title">第四阶段</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/spring-cloud/01-spring-cloud.md" class="nav-link" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/rabbitmq/01-简介.md" class="nav-link" aria-label="RabbitMQ"><!--[--><!--]--> RabbitMQ <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/es/00-素材.md" class="nav-link" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/other/01-SnowFlake.md" class="nav-link" aria-label="其它"><!--[--><!--]--> 其它 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Java 多线程</p><ul class=""><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="多线程：基础"><!--[--><!--]--> 多线程：基础 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#认识线程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="认识线程"><!--[--><!--]--> 认识线程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#线程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="线程"><!--[--><!--]--> 线程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#使用-thread-类创建线程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用 Thread 类创建线程"><!--[--><!--]--> 使用 Thread 类创建线程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#使用-runnable-接口创建线程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用 Runnable 接口创建线程"><!--[--><!--]--> 使用 Runnable 接口创建线程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#线程的状态" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="线程的状态"><!--[--><!--]--> 线程的状态 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#线程的调用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="线程的调用"><!--[--><!--]--> 线程的调用 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#线程的优先级-了解、自学" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="线程的优先级（了解、自学）"><!--[--><!--]--> 线程的优先级（了解、自学） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#实现线程调度的方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实现线程调度的方法"><!--[--><!--]--> 实现线程调度的方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#线程的同步与互斥" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="线程的同步与互斥"><!--[--><!--]--> 线程的同步与互斥 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#synchronized-关键字" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="synchronized 关键字"><!--[--><!--]--> synchronized 关键字 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/java-thread/thread-01-base.html#锁" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="锁"><!--[--><!--]--> 锁 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/java-thread/thread-02-ThreadPool.html" class="nav-link sidebar-item" aria-label="多线程：线程池"><!--[--><!--]--> 多线程：线程池 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/java-thread/thread-03-ThreadLocal.html" class="nav-link sidebar-item" aria-label="多线程：ThreadLocal"><!--[--><!--]--> 多线程：ThreadLocal <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/java-thread/thread-04-synchronized&amp;ReentrantLock.html" class="nav-link sidebar-item" aria-label="多线程：synchronized 和 ReentrantLock"><!--[--><!--]--> 多线程：synchronized 和 ReentrantLock <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/java-thread/thread-05-atomic.html" class="nav-link sidebar-item" aria-label="多线程：原子值"><!--[--><!--]--> 多线程：原子值 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/java-thread/thread-06-lock.html" class="nav-link sidebar-item" aria-label="多线程：锁"><!--[--><!--]--> 多线程：锁 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="多线程-基础" tabindex="-1"><a class="header-anchor" href="#多线程-基础" aria-hidden="true">#</a> 多线程：基础</h1><h2 id="认识线程" tabindex="-1"><a class="header-anchor" href="#认识线程" aria-hidden="true">#</a> 认识线程</h2><p>现代化操作系统都是采用『<strong>多任务</strong>』和『<strong>分时</strong>』设计，从而诞生了『<strong>程序</strong>』和『<strong>进程</strong>』的概念，而后又进一步诞生了『<strong>线程</strong>』的概念。</p><blockquote><p>从历史的时间线来看，『<strong>进程</strong>』在前，『<strong>线程</strong>』在后。</p></blockquote><p>『<strong>程序</strong>』是对数据描述与操作的代码的集合。</p><p>『<strong>进程</strong>』是程序的一次动态执行的过程，它对应了从代码加载、执行至执行完毕的一个完整过程。这个过程也是进程从产生、发展至消亡的过程。</p><blockquote><p>通俗地说，『程序』是死的，『进程』是活的。进程就是『<strong>活着的</strong>』程序。</p></blockquote><p>『<strong>运行程序</strong>』也被称作『<strong>执行任务</strong>』,一个操作系统中可以同时运行多个程序也就是同时执行『<strong>多个任务</strong>』，那么每个任务就对应一个进程。</p><p>在操作系统的管控下，多个进程『<strong>轮流</strong>』使用 CPU 资源<small>（和其他公共资源）</small>，这被称作『<strong>分时</strong>』。</p><blockquote><p>通俗地说，站在 CPU 的角度而言，<strong>根本不存在所谓的同时</strong>。这一点很重要。</p></blockquote><p>进程的特点：</p><ul><li><p>进程是操作系统运行程序的基本单元；</p></li><li><p>每一个进程都有自己独立的一块内存空间和一组系统资源；</p></li><li><p>每一个进程的内部数据和状态是完全独立的。</p></li></ul><h2 id="线程" tabindex="-1"><a class="header-anchor" href="#线程" aria-hidden="true">#</a> 线程</h2><p>『线程』是更现代化的概念和技术<small>（它的诞生晚于进程）</small>。线程是『<strong>进程中</strong>』的一个单位，即，一个进程可以有多个线程<small>（至少有一个），简单来说，就是 <code>一对多</code> 的关系</small>。</p><p>线程是进程中执行运算的最小单元，一个进程在其执行过程中可以产生多个线程，而线程必须在某个进程内执行。</p><p>线程是进程内部的一个执行单元，是可以完成一个独立任务的顺序控制流程。如果在一个进程中同时运行了多个线程，用来完成不同的工作，则称之为『<strong>多线程</strong>』。</p><p>线程和进程既有联系又有区别：</p><ul><li><p>一个进程中至少要有一个线程；</p></li><li><p>操作系统将资源分配给进程，同一个进程的所有线程共享该进程的所有资源；</p></li><li><p>操作系统将 CPU 分配给线程，即真正在 CPU 上运行的上线程。</p></li></ul><p><strong>每个线程都有一个『执行方法』</strong><small>（也叫『<strong>入口方法</strong>』）</small>，每个进程至少拥有的、自动拥有的那个线程的执行方法毫无疑问就是 <strong>main</strong> 方法，因此这个线程也被成为『<strong>主线程</strong>』。</p><p>每个线程的任务、使命就是去执行它的执行方法。<small>线程的执行方法的结束，即意味着线程的生命、使命的完结。</small></p><p>创建并使用线程的过程可以分为 4 个步骤：</p><ol><li><p>定义一个线程类，同时指明这个线程的执行方法</p></li><li><p>创建线程对象</p></li><li><p>启动线程</p></li><li><p>终止线程</p></li></ol><p>定义一个线程类通常有两种方法：继承 <strong>java.lang.Thread</strong> 类和实现 <strong>java.lang.Runnable</strong> 接口。</p><h2 id="使用-thread-类创建线程" tabindex="-1"><a class="header-anchor" href="#使用-thread-类创建线程" aria-hidden="true">#</a> 使用 Thread 类创建线程</h2><p>Java 提供了 java.lang.Thread 类支持多线程编程，该类提供了大量的方法来控制和操作线程。</p><table><thead><tr><th style="text-align:left;">#</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">run 方法</td><td style="text-align:left;">直接调用线程的执行函数</td></tr><tr><td style="text-align:left;">start 方法</td><td style="text-align:left;">启动线程</td></tr><tr><td style="text-align:left;">sleep 方法</td><td style="text-align:left;">让线程休眠<small>（即让出 CPU）</small>指定 <strong>毫秒</strong> 数</td></tr><tr><td style="text-align:left;">getName 方法</td><td style="text-align:left;">返回该线程的名称</td></tr><tr><td style="text-align:left;">getPriority 方法</td><td style="text-align:left;">返回线程的优先级</td></tr><tr><td style="text-align:left;">setPriority 方法</td><td style="text-align:left;">更改线程的优先级</td></tr><tr><td style="text-align:left;">getState 方法</td><td style="text-align:left;">返回该线程的状态</td></tr><tr><td style="text-align:left;">isAlive 方法</td><td style="text-align:left;">测试线程是否处于活动状态</td></tr><tr><td style="text-align:left;">join 方法</td><td style="text-align:left;">等待该线程终止</td></tr><tr><td style="text-align:left;">interrupt 方法</td><td style="text-align:left;">中断线程</td></tr><tr><td style="text-align:left;">yield 方法</td><td style="text-align:left;">暂停正在执行的线程，并执行其他线程</td></tr></tbody></table><p>使用继承 Thread 类的方式创建线程的实现步骤如下：</p><ol><li><p>定义一个类去继承 Thread 类，重写 <strong>Thread#run</strong> 方法，在 <strong>Thread#run</strong> 方法中实现代码逻辑；</p></li><li><p>创建线程对象;</p></li><li><p>调用 <strong>Thread#start</strong> 方法启动线程。</p></li></ol><h2 id="使用-runnable-接口创建线程" tabindex="-1"><a class="header-anchor" href="#使用-runnable-接口创建线程" aria-hidden="true">#</a> 使用 Runnable 接口创建线程</h2><p>由于 Java 只允许单继承，因此一旦一个类已有父类，那么就无法再继承 Thread 类，从而导致上述实现线程的方式无法使用。</p><p>使用 Runnable 接口创建线程能解决上述问题。</p><p>Runnable 接口声明了一个 <strong>Runnable#run</strong> 方法。任何一个类都可以通过实现 Runnable 接口并实现其 <strong>Runnable#run</strong> 方法来完成线程的所有活动。</p><p>使用实现 Runnable 接口的方式创建线程的实现步骤如下：</p><ol><li><p>定义 Xxx 类并实现 java.lang.Runnable 接口，并实现它所声明的 <strong>run</strong> 方法；</p></li><li><p>创建线程对象；</p></li><li><p>调用 <strong>start</strong> 方法启动线程。</p></li></ol><h2 id="线程的状态" tabindex="-1"><a class="header-anchor" href="#线程的状态" aria-hidden="true">#</a> 线程的状态</h2><p>线程的核心状态有 3 个：</p><ul><li>可执行<small>（Runnable）</small></li><li>执行中<small>（Running）</small></li><li>阻塞中<small>（Blocking）</small></li></ul><p>在加上线程创建之处的短暂的『新生』状态<small>（Created）</small>和销毁前的短暂的『僵尸』状态<small>（Zombie）</small>，从而组成了最常见的线程的 5 种状态。</p><dl><dt>新生状态：Created</dt><dd>创建线程对象后，而又未调用其 Thread#start 方法之前，该线程处于这种状态。此时操作系统还未为其分配资源。</dd><dd>此时只能启动和终止线程，任何而其他操作都会发生议程。</dd></dl><dl><dt>可执行状态：Runnable</dt><dd>当调用 Thread#start 之后，操作系统为该线程分配了所必须的资源，但是而又未获得 CPU 执行机会时，该线程处于这种状态。</dd><dd>由于 CPU 时稀缺的公共资源，毫无疑问，在多线程程序中，任意时刻有大量的线程都是处于这种状态。</dd><dd>通俗的说，这种状态就是『万事俱备，只欠东风』。</dd></dl><dl><dt>执行状态：Running</dt><dd>当前获得 CPU 资源，正在执行的线程，就是处于这种状态。</dd><dd>对于单核 CPU 而言，一个进程中无论有多少线程，任意时刻有且仅有一个线程是处于该状态。</dd><dd>同理，对于多核 CPU 而言，<small>（全系统无论多少进程多少线程）</small>N 核 CPU 有且仅有 N 个线程处于这种状态。</dd></dl><dl><dt>阻塞状态：Blocked</dt><dd>一个正在运行（Running）的线程因为某种原因代码逻辑无法再继续运行下去了，就进入阻塞状态。</dd><dd>进入阻塞状态的线程会让出 CPU，因为即便它强占 CPU 也无法再继续运行下去。</dd><dd>当造成该线程阻塞的原因小时后，该线程将又有机会运行。</dd><dd>通俗的说，这种状态就是『除了欠东风，还欠别的』。</dd></dl><p>导致一个线程阻塞最常见的原因有以下几个：</p><ul><li><p>调用了 Thread 类的静态方法 Thread#sleep ;</p></li><li><p>线程执行 IO 时，无数据可读（或无空间可写）；</p></li><li><p>一个线程的执行需要获得一个『锁』，而此时锁正被别的线程占用。</p></li></ul><dl><dt>僵尸状态：Zombie</dt><dd>一个线程在结束执行后（无论是正常执行完执行函数，还是被终止掉了），在系统回收分配给它的资源之前，该进程短暂地处于这种状态。</dd></dl><h2 id="线程的调用" tabindex="-1"><a class="header-anchor" href="#线程的调用" aria-hidden="true">#</a> 线程的调用</h2><h3 id="线程的优先级-了解、自学" tabindex="-1"><a class="header-anchor" href="#线程的优先级-了解、自学" aria-hidden="true">#</a> 线程的优先级（了解、自学）</h3><p>当一个时刻有多个线程处于可运行状态，它们需要排队等待 CPU 资源，每个线程会自动获得一个线程的优先级<small>（Priority）</small>，优先级的高低反映线程的重要或紧急程序。</p><p>可运行状态<small>（Runnable）</small>的线程按优先级排队，线程调度依据建立在优先级基础上的『先到先服务』原则。</p><blockquote><p>线程的调度是操作系统的重要功能和职责。</p><p>线程调度的规则依赖于操作系统内核的实现。有的操作系统会充分遵守优先级规则，有的系统只是将优先级当做『<strong>建议值</strong>』，而有的操作系统则完全没有优先级概念、无视优先级，完全随机。</p><p><strong>所以不能以优先级作为控制线程先后执行顺序的手段！</strong></p></blockquote><p>线程的优先级用 1 ... 10 表示，10 表示优先级最高，默认值是 5。Thread 类中有对应的静态常量：NORM_PRIORITY、MIN_PRIORITY、MAX_PRIORITY 。</p><p>线程的优先级可以通过 <strong>Thread#setPriority(int level)</strong> 方法更改。</p><h3 id="实现线程调度的方法" tabindex="-1"><a class="header-anchor" href="#实现线程调度的方法" aria-hidden="true">#</a> 实现线程调度的方法</h3><p>线程调度的实现核心思路只有一个：<strong>通过各种手段，迫使一个线程<small>（通常是当前执行线程）</small>让出 CPU ，从而让其它线程拥有执行机会</strong>。</p><ul><li><p>手段一：<strong>Thread#join</strong> 方法</p><p>Thread#join 方法会导致当前线程阻塞<small>（让出 CPU）</small>，等待调用该方法的线程<small>（即，Thread 对象所代表的那个线程）</small>结束后再继续执行本线程。</p></li><li><p>手段二：<strong>Thread.sleep</strong> 方法</p><p>Thread.sleep 方法会导致当前线程睡眠<small>（本质上也是阻塞，迫使当前线程让出 CPU）</small>，在指定时间到期后，重新进入可运行状态。</p></li><li><p>手段三：<strong>Thread.yield</strong> 方法</p><p>Thread.yield 方法稍微有点不同，它让当前线程让出 CPU ，但并不是进入阻塞状态，而是直接进入 Runnable 状态。</p></li></ul><p>需要注意的是，当前线程让出 CPU 之后，接下来是哪个线程执行<small>（从 Runnable 状态变为 Running 状态）</small>带有『<strong>不确定性</strong>』。</p><h3 id="线程的同步与互斥" tabindex="-1"><a class="header-anchor" href="#线程的同步与互斥" aria-hidden="true">#</a> 线程的同步与互斥</h3><p>当两个或多个线程需要访问同一资源<small>（或执行同一段代码时）</small>，需要某一时刻只能被一个线程使用的方式，称为线程『<strong>互斥</strong>』。</p><p>当两个或多个线程以互斥的方式访问完同一资源<small>（或执行同一段代码）</small>后，『通知』其他线程的方式，称为线程『<strong>同步</strong>』。</p><blockquote><p>同步与互斥通常总是一起出现的。只出现互斥，不出现同步，意味着代码逻辑是一种极简单的多线程状况。</p></blockquote><h3 id="synchronized-关键字" tabindex="-1"><a class="header-anchor" href="#synchronized-关键字" aria-hidden="true">#</a> synchronized 关键字</h3><p>使用 <strong>synchronized</strong> 关键字修饰的方法控制对类成员变量的访问。每个类实例都对应一把锁，方法一旦执行，就独占该锁，直到方法结束时才将锁释放；此后其它被阻塞的线程才能获得该锁，重新进入可执行状态。</p><p>这种机制保证了同一时刻，对于每一个实例，其所声明为 synchronized 的方法只能有一个处于可执行状态，从而有效地避免了类成员变量的访问冲突。</p><p>语法：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>访问修饰符 <span class="token keyword">synchronized</span> 返回类型 方法名 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">synchronized</span> 访问修饰符 返回类型 方法名 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>synchronized 方法的缺陷在于：如果将一个耗时的方法声明为 synchronized 将会使其它线程阻塞时间过长，从而影响系统执行效率和用户体验。</p><p>同步代码块是同步方法的缺陷的解决方案，它『锁住』的不是整个方法，而是方法中的一个代码片段。</p><p>语法：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">synchronized</span> <span class="token punctuation">(</span>一个对象<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里的『一个对象』通常是一个字符串常量对象。</p><h2 id="锁" tabindex="-1"><a class="header-anchor" href="#锁" aria-hidden="true">#</a> 锁</h2><p>Java 并发 API 对『<strong>锁</strong>』提供了支持。锁是一些对象，它们为 synchronized 提供了替代方案。</p><p><strong>锁<small>（Lock）</small></strong> 不仅能实现 synchronized 的互斥功能，还能进一步实现线程间的同步功能。</p><p>锁的工作原理如下：在访问共享资源之前，申请用于保护资源的锁；当资源访问结束完成时，释放锁。当某个线程正在使用锁时，如果另一个线程尝试申请锁，那么后者将会阻塞等待，直到锁被前者释放位置。</p><blockquote><p>锁的作用，逻辑上，就是一个令牌、通行证。持有这个令牌、通行证的线程才能继续执行。没有这个令牌、通行证的线程，无法继续执行，直到令牌的持有者放下令牌，而被它拿到后，它才能继续执行。</p></blockquote><p>所有的锁都要实现 <strong>Lock</strong> 接口，最常用的 Lock 接口的实现类是 <strong>ReentrantLock</strong> 。</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>void lock()</td><td>进行等待，直到可以获得锁为止</td></tr><tr><td>void lockInterruptibly() throws ...</td><td>除非被中断，否则进行等待，直到可以获得锁为止</td></tr><tr><td>Condition newCondition()</td><td>返回与调用锁关联的 Condition 对象</td></tr><tr><td>boolean tryLock()</td><td>尝试获得锁，如果锁不可获得，立即返回 false；如果可获得，返回 true</td></tr><tr><td>boolean tryLock(long wait, TimeUnit unit) throws ...</td><td>在指定时间内，尝试获得锁。如果超出时间后仍无法获得，则返回 false；如果可获得，则返回 true</td></tr><tr><td>void unlock()</td><td>释放锁</td></tr></tbody></table><p>ReentrantLock 实现了一种可重入锁，当前持有锁的线程能够重复进入这种锁。当然，对于线程重入锁而言，所有 lock ( ) 调用必须有相同数量的 unlock ( ) 调用进行抵消。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/8/23 下午5:35:44</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: hemiao3000@126.com">hemiao</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/java-thread/thread-02-ThreadPool.html" class="nav-link" aria-label="多线程：线程池"><!--[--><!--]--> 多线程：线程池 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.98b3ec54.js" defer></script><script src="/assets/js/1812.d943ba23.js" defer></script><script src="/assets/js/app.305f9df9.js" defer></script>
  </body>
</html>
