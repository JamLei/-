"use strict";(self.webpackChunkjava_note_vuepress2=self.webpackChunkjava_note_vuepress2||[]).push([[4269],{25168:(a,n,s)=>{s.r(n),s.d(n,{data:()=>t});const t={key:"v-0791ea62",path:"/mybatis/08-mybatis-%E5%85%B6%E5%AE%83.html",title:"MyBatis 扩展",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"一个个人习惯引发的问题",slug:"一个个人习惯引发的问题",children:[{level:3,title:"有些人的个人习惯",slug:"有些人的个人习惯",children:[]},{level:3,title:"问题及其原因",slug:"问题及其原因",children:[]},{level:3,title:"解决办法",slug:"解决办法",children:[]}]},{level:2,title:"MyBatis（3.4.5 以下）中使用 LocalDateTime",slug:"mybatis-3-4-5-以下-中使用-localdatetime",children:[{level:3,title:"背景",slug:"背景",children:[]},{level:3,title:"修改",slug:"修改",children:[]}]}],filePathRelative:"mybatis/08-mybatis-其它.md",git:{updatedTime:1629711344e3,contributors:[{name:"hemiao",email:"hemiao3000@126.com",commits:1}]}}},98947:(a,n,s)=>{s.r(n),s.d(n,{default:()=>g});var t=s(66252);const p=(0,t.uE)('<h1 id="mybatis-扩展" tabindex="-1"><a class="header-anchor" href="#mybatis-扩展" aria-hidden="true">#</a> MyBatis 扩展</h1><h2 id="一个个人习惯引发的问题" tabindex="-1"><a class="header-anchor" href="#一个个人习惯引发的问题" aria-hidden="true">#</a> 一个个人习惯引发的问题</h2><h3 id="有些人的个人习惯" tabindex="-1"><a class="header-anchor" href="#有些人的个人习惯" aria-hidden="true">#</a> 有些人的个人习惯</h3><p>由于 mybatis 的 mapper 映射文件和 dao 的一一对应关系，有些人习惯将 mapper 映射文件<small>（ <em>.xml</em> ）</small>和 dao 接口放在一起，并且命名为统一的名字。例如：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>src\n└── main\n    └── java\n        └── xxx\n            └── yyy\n                └── zzz\n                    └── dao\n                        ├── XxxDAO.java\n                        ├── XxxDAOMapper.xml\n                        ├── YyyDAO.java\n                        ├── YyyDAOMapper.xml\n                        ├── ZzzDAO.java\n                        └── ZzzDAOMapper.xml\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>通常认为这不是一个很好的习惯，因为在 Maven 项目中，<strong>.xml</strong> 和 <strong>.properties</strong> 一类的资源文件应该统一放在 <strong>resources</strong> 目录下，而非放在代码目录<small>（ <em>java</em> ）</small>下。</p><p>但是这么干也是有好处的，因为 DAO 和 DAOMapper 在一起，很方便一起找到它们俩，开发者多少还是能省点事的。</p><h3 id="问题及其原因" tabindex="-1"><a class="header-anchor" href="#问题及其原因" aria-hidden="true">#</a> 问题及其原因</h3><p>按照上述结构来组织代码时，在 spring 和 mybatis 的相关配置都正确的情况下，你运行项目会失败，报错信息会告诉你项目中的 Mapper<small>（ <em>.xml</em> ）</small>文件找不到！</p><blockquote><p>如果你对 <strong>classpath</strong> 的概念很熟悉的话，那么你很显然会立刻想到到哪里去看、去验证是否真的没有 mapper 文件。</p></blockquote><p>这里的原因在于，对于代码文件夹<small>（ <em>java</em> ）</small>目录下的文件，maven 默认只对 <em>.java</em> 文件做相关工作：编译成 <em>.class</em> 文件，并『搬』到 classpath 下。对于代码文件夹<small>（ <em>java</em> ）</small>目录下的非 <em>.java</em> 文件，maven 默认一概视而不见，不会帮你把它们『搬』到 classpath 下，就好似这些非 <em>.java</em> 文件不存在。</p><p>此时，需要你通过配置『告诉』maven 代码文件夹<small>（ <em>java</em> ）</small>目录，也承担资源文件夹<small>（ <em>resources</em> ）</small>的功能，要求 maven 帮我们『搬』文件。</p><h3 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法" aria-hidden="true">#</a> 解决办法</h3><p>在 <em>pom.xml</em> 文件的 <strong>&lt;build&gt;...&lt;/build&gt;</strong> 中添加如下配置：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 你可以试试去掉这一段的效果 --&gt;</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="mybatis-3-4-5-以下-中使用-localdatetime" tabindex="-1"><a class="header-anchor" href="#mybatis-3-4-5-以下-中使用-localdatetime" aria-hidden="true">#</a> MyBatis<small>（3.4.5 以下）</small>中使用 LocalDateTime</h2><p>MyBatis 从 <strong>3.4.5</strong> 版本开始就完全支持这种类型了，不再需要自己去写类型转换。因此以下内容仅作了解。</p><h3 id="背景" tabindex="-1"><a class="header-anchor" href="#背景" aria-hidden="true">#</a> 背景</h3><p>项目中使用 MySQL 数据库，然后用 mybatis 做数据持久化。最近使用时，想把一些 model 类的 gmtCreate、gmtModified 等字段从 <strong>java.util.Date</strong> 改成 Java 8 的 <strong>java.time.LocalDateTime</strong>，此类是不可变类，且自带很好用的日期函数 api 。</p><p>原本依赖如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>compile &quot;org.mybatis:mybatis:3.3.0&quot;\ncompile &quot;org.mybatis:mybatis-spring:1.2.5&quot;\ncompile &quot;org.mybatis.generator:mybatis-generator-core:1.3.2&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>直接修改代码有两个问题：</p><ol><li><p>mapper、model、xml 文件都是用 generator 插件生成，维护成本高。</p></li><li><p>会报错如下：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalStateException</span><span class="token operator">:</span> <span class="token class-name">No</span> typehandler found <span class="token keyword">for</span> property createTime\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span>ResultMapping</span>$<span class="token class-name">Builder</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token class-name">ResultMapping</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">151</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span>ResultMapping</span>$<span class="token class-name">Builder</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">ResultMapping</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">140</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span>MapperBuilderAssistant</span><span class="token punctuation">.</span><span class="token function">buildResultMapping</span><span class="token punctuation">(</span><span class="token class-name">MapperBuilderAssistant</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">382</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>XMLMapperBuilder</span><span class="token punctuation">.</span><span class="token function">buildResultMappingFromContext</span><span class="token punctuation">(</span><span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">378</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>XMLMapperBuilder</span><span class="token punctuation">.</span><span class="token function">resultMapElement</span><span class="token punctuation">(</span><span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">280</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>XMLMapperBuilder</span><span class="token punctuation">.</span><span class="token function">resultMapElement</span><span class="token punctuation">(</span><span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">252</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>XMLMapperBuilder</span><span class="token punctuation">.</span><span class="token function">resultMapElements</span><span class="token punctuation">(</span><span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">244</span><span class="token punctuation">)</span>\n  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>XMLMapperBuilder</span><span class="token punctuation">.</span><span class="token function">configurationElement</span><span class="token punctuation">(</span><span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">116</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><h3 id="修改" tabindex="-1"><a class="header-anchor" href="#修改" aria-hidden="true">#</a> 修改</h3><p>首先，添加了以下依赖：（jsr310 是 java 规范 310）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>compile &quot;org.mybatis:mybatis-typehandlers-jsr310:1.0.2&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',26),e=(0,t.Uk)("接着，在 "),l=(0,t._)("em",null,[(0,t._)("code",null,"mybatis-config.xml")],-1),o=(0,t.Uk)(" 中添加如下配置：（该配置来源于"),c={href:"https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers",target:"_blank",rel:"noopener noreferrer"},u=(0,t.Uk)("官网"),i=(0,t.Uk)("）"),r=(0,t.uE)('<div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>\n  <span class="token comment">&lt;!-- ... --&gt;</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.InstantTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalDateTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalDateTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.OffsetDateTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.OffsetTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.ZonedDateTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.YearTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.MonthTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.YearMonthTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.JapaneseDateTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>看了文档发现需要 <em><code>mybatis 3.4.0</code></em> 版本</p><p>不过这里有个问题了，会出现版本不兼容问题，报错如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java.lang.AbstractMethodError: org.mybatis.spring.transaction.SpringManagedTransaction.getTimeout()Ljava/lang/Integer;\n    at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:85)\n    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:62)\n    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\n    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>查看发现 <em><code>SpringManagedTransaction</code></em> 未实现 <em><code>Transaction</code></em> 中的 <em><code>getTimeout()</code></em> 方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Transaction</span> <span class="token punctuation">{</span>\n    <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>\n    <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>',6),k=(0,t.Uk)("查了文档发现：Spring 版本跟 Mybatis 版本有个对照表要满足，详情见"),m={href:"http://mybatis.org/spring/zh/",target:"_blank",rel:"noopener noreferrer"},b=(0,t.Uk)("官网"),d=(0,t.uE)('<p>而我需要的 <code>mapper.xml</code> 文件类似如下：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.my.MyMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BaseResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.my.MyModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BIGINT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmt_create<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OTHER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmtCreate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalDateTimeTypeHandler<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n \n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>\n  <span class="token comment">&lt;!-- 省略 --&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>之后，查了 generator 的官方文档，发现还是可以通过 <em><code>generator.xml</code></em> 的配置文件做到的。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my_table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">domainObjectName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generatedKey</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sqlStatement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span> <span class="token attr-name">identity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>columnOverride</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmt_create<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmtCreate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalDateTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OTHER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.time.LocalDateTime<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>columnOverride</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmt_modified<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gmtModified<span class="token punctuation">&quot;</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.type.LocalDateTimeTypeHandler<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OTHER<span class="token punctuation">&quot;</span></span> \n<span class="token attr-name">&lt;!--</span> <span class="token attr-name">省略其他</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>',4),g={render:function(a,n){const s=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[p,(0,t._)("p",null,[e,l,o,(0,t._)("a",c,[u,(0,t.Wm)(s)]),i]),r,(0,t._)("p",null,[k,(0,t._)("a",m,[b,(0,t.Wm)(s)])]),d],64)}}}}]);