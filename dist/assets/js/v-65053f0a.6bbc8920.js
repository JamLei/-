"use strict";(self.webpackChunkjava_note_vuepress2=self.webpackChunkjava_note_vuepress2||[]).push([[1984],{73557:(s,a,n)=>{n.r(a),n.d(a,{data:()=>e});const e={key:"v-65053f0a",path:"/windows/11-MySQL%E8%A7%A3%E5%8E%8B%E7%89%88.html",title:"MySQL 压缩版",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"写在前面的话",slug:"写在前面的话",children:[]},{level:2,title:"下载、解压 mysql",slug:"下载、解压-mysql",children:[]},{level:2,title:"添加缺省的配置文件",slug:"添加缺省的配置文件",children:[]},{level:2,title:"初始化",slug:"初始化",children:[]},{level:2,title:"启动 MySQL 服务端",slug:"启动-mysql-服务端",children:[]},{level:2,title:"修改密码",slug:"修改密码",children:[]},{level:2,title:"确认 mysql 编码",slug:"确认-mysql-编码",children:[]},{level:2,title:"可选操作: 注册成 Windows 服务（非必须）",slug:"可选操作-注册成-windows-服务-非必须",children:[]}],filePathRelative:"windows/11-MySQL解压版.md",git:{updatedTime:1629711344e3,contributors:[{name:"hemiao",email:"hemiao3000@126.com",commits:1}]}}},50278:(s,a,n)=>{n.r(a),n.d(a,{default:()=>d});var e=n(66252);const l=(0,e.uE)('<h1 id="mysql-压缩版" tabindex="-1"><a class="header-anchor" href="#mysql-压缩版" aria-hidden="true">#</a> MySQL 压缩版</h1><h2 id="写在前面的话" tabindex="-1"><a class="header-anchor" href="#写在前面的话" aria-hidden="true">#</a> 写在前面的话</h2><p>有些软件对于安装路径有一定的要求，例如：路径中不能有空格，不能有中英文，不能有特殊符号，等等。</p><p>为了避免不必要的麻烦，也懒得一一辨别踩坑，我们人为作出『<strong>统一的约定</strong>』：</p><ul><li><p>安装版的软件，一律安装在软件的默认安装路径，不要去改变它。<small>默认在哪就是哪，别动。</small></p></li><li><p>解压版的软件，一律安装在：<strong>D:\\ProgramFiles</strong> 。这是一个没中文、没空格的路径！</p></li></ul>',5),t=(0,e.Uk)("MySQL 的安装"),p=(0,e._)("small",null,"（无论是安装版，还是解压版）",-1),r=(0,e.Uk)("，都依赖于所安装的电脑上要安装 "),c=(0,e._)("code",null,"Visual C++ Redistributable",-1),o=(0,e.Uk)("。"),i={href:"https://www.microsoft.com/en-us/download/details.aspx?id=40784",target:"_blank",rel:"noopener noreferrer"},m=(0,e.Uk)("下载链接"),u=(0,e.uE)('<h2 id="下载、解压-mysql" tabindex="-1"><a class="header-anchor" href="#下载、解压-mysql" aria-hidden="true">#</a> 下载、解压 mysql</h2><p>下载，略。</p><p>解压到 <strong>D:\\ProgramFiles</strong> 目录下。</p><h2 id="添加缺省的配置文件" tabindex="-1"><a class="header-anchor" href="#添加缺省的配置文件" aria-hidden="true">#</a> 添加缺省的配置文件</h2><p>mysql 解压的文件中默认没有两个关键性的东西：<strong>my.ini</strong> 文件和 <strong>data</strong> 目录。</p><p>在 mysql 的解压目录/安装目录下的根目录下创建 <strong>my.ini</strong> 文件，并添置以下内容：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>[client]\n<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306</span>\n\n[mysql]\n<span class="token attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token attr-value">utf8</span>\n\n[mysqld]\n<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306</span>\n<span class="token attr-name">basedir</span><span class="token punctuation">=</span><span class="token attr-value">D:\\ProgramFiles\\mysql-5.7.24-winx64</span>\n<span class="token attr-name">datadir</span><span class="token punctuation">=</span><span class="token attr-value">D:\\ProgramFiles\\mysql-5.7.24-winx64\\data</span>\n<span class="token attr-name">character_set_server</span><span class="token punctuation">=</span><span class="token attr-value">utf8mb4</span>\n<span class="token attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token attr-value">INNODB</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>各配置项解释如下：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">## CLIENT SECTION</span>\n<span class="token comment">## ---------------------------------------------------------</span>\n[client]\n<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306                       设置 mysql 客户端连接服务端时默认使用的端口</span>\n\n[mysql]\n<span class="token attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token attr-value">utf8      设置 mysql 客户端默认使用的字符集</span>\n\n<span class="token comment">## SERVER SECTION</span>\n<span class="token comment">## ---------------------------------------------------------</span>\n[mysqld]\n<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306                       mysql 服务端监听/占用的端口</span>\n\n<span class="token attr-name">basedir</span><span class="token punctuation">=</span><span class="token attr-value">D:\\ProgramFiles\\mysql-5.7.24-winx64         mysql 的安装路径</span>\n\n<span class="token attr-name">datadir</span><span class="token punctuation">=</span><span class="token attr-value">D:\\ProgramFiles\\mysql-5.7.24-winx64\\data    mysql 数据库数据文件所在路径</span>\n\n<span class="token attr-name">character_set_server</span><span class="token punctuation">=</span><span class="token attr-value">utf8mb4    新建 schema 或 table 时默认使用的字符集</span>\n\n<span class="token attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token attr-value">INNODB   新建 table 时默认使用的引擎</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p><small>注意，此处的 basedir 和 datadir 要符合实际情况中 MySQL 的解压路径。</small></p></blockquote><h2 id="初始化" tabindex="-1"><a class="header-anchor" href="#初始化" aria-hidden="true">#</a> 初始化</h2><blockquote><p>由于后续要使用到 MySQL 解压目录下的 <em><code>bin</code></em> 目录下的各种命令，方便起见，可以新建 <em><code>MYSQL_HOME</code></em> 环境变量，并将其下的 <em><code>bin</code></em> 目录添加到环境变量 <em><code>path</code></em> 中。</p></blockquote><p>在终端中输入，<em><code>mysqld --initialize</code></em>，回车后可见在 mysql 解压目录中生成了 data 文件夹。</p><p><strong>注意</strong>：在 data 文件夹中，有一个 <code>.err</code> 文件，其中的内容包含了（最后一行）初始的 root 用户的密码，类似如下：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">2019</span>-01-09T08:11:05.817097Z <span class="token number">1</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: ?ds:i+<span class="token punctuation">)</span>4C/wo\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>上例中，其中 <code>?ds:i+)4C/wo</code> 就是 root 用户的初始密码。</p><h2 id="启动-mysql-服务端" tabindex="-1"><a class="header-anchor" href="#启动-mysql-服务端" aria-hidden="true">#</a> 启动 MySQL 服务端</h2><p>执行命令启动 MySQL 服务端</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>d:<span class="token punctuation">\\</span>ProgramFiles<span class="token punctuation">\\</span>mysql-5.7.24-winx64<span class="token punctuation">\\</span>bin<span class="token punctuation">\\</span>mysqld\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>注意，执行的是 <em><code>myslqd</code></em>，而不是 <em><code>mysql</code></em> 。它们两个是不同的东西，不要执行错了。</p><h2 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码" aria-hidden="true">#</a> 修改密码</h2><p>启动 mysql，通过 <em><code>mysql -uroot -p</code></em> 进行连接/登录<small>（使用默认的初始密码）</small>，然后可通过以下命令进行修改 root 用户密码：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> password <span class="token keyword">for</span> root<span class="token variable">@localhost</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&#39;新密码&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>最后输入：<strong>show variables like &quot;character%&quot;;</strong> 确保字符集编码是 UTF8 编码。</p><h2 id="确认-mysql-编码" tabindex="-1"><a class="header-anchor" href="#确认-mysql-编码" aria-hidden="true">#</a> 确认 mysql 编码</h2><p>mysql 的默认编码是 latin1，可通过下面命令查看确认：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">&#39;character%&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果显示结果中出现 latin1，则通过修改配置文件 <em><code>my.ini</code></em> 进行配置：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[mysqld]\n## 新建 schema 或 table 时默认使用的字符集\ncharacter_set_server=utf8\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="可选操作-注册成-windows-服务-非必须" tabindex="-1"><a class="header-anchor" href="#可选操作-注册成-windows-服务-非必须" aria-hidden="true">#</a> 可选操作: 注册成 Windows 服务<small>（非必须）</small></h2><p>在终端中输入：<em><code>mysqld --install</code></em>，安装 mysql 服务。</p><p>另外，反向的卸载/删除操作中，使用命令 <em><code>mysqld --remove</code></em>，卸载前记得要停止 mysqld 。</p><p>可以通过以下命令启动/停止 mysql 服务端。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>net start mysql\nnet stop mysql\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',34),d={render:function(s,a){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[l,(0,e._)("p",null,[t,p,r,c,o,(0,e._)("a",i,[m,(0,e.Wm)(n)])]),u],64)}}}}]);